<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KontrolGas Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            color: white;
        }

        .logo {
            width: 80px;
            height: 80px;
            margin: 0 auto 20px;
            display: block;
        }

        .logo svg {
            width: 100%;
            height: 100%;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .card h3 {
            color: #4a5568;
            margin-bottom: 20px;
            font-size: 1.2em;
            text-align: center;
        }

        .status-bar {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .status-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9em;
        }

        .status-indicator {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #4ade80;
        }

        /* Medidor de bater√≠a en la barra de estado */
        .battery-meter {
            display: flex;
            align-items: center;
            gap: 8px;
            background: rgba(255, 255, 255, 0.8);
            padding: 8px 12px;
            border-radius: 20px;
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        .battery-icon {
            font-size: 1.2em;
        }

        .battery-info {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 2px;
        }

        .battery-percentage {
            font-weight: bold;
            font-size: 0.9em;
        }

        .battery-voltage {
            font-size: 0.8em;
            color: #666;
        }

        .battery-progress {
            width: 40px;
            height: 6px;
            background: #e0e0e0;
            border-radius: 3px;
            overflow: hidden;
        }

        .battery-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4ade80, #22c55e);
            transition: width 0.3s ease;
        }

        .gauge-container {
            position: relative;
            width: 200px;
            height: 120px;
            margin: 0 auto;
        }

        .gauge-svg {
            width: 100%;
            height: 100%;
        }

        .gauge-bg {
            fill: none;
            stroke: #e2e8f0;
            stroke-width: 12;
        }

        .gauge-fill {
            fill: none;
            stroke: url(#gaugeGradient);
            stroke-width: 12;
            stroke-linecap: round;
            transition: stroke-dasharray 0.5s ease;
        }

        .gauge-text {
            text-anchor: middle;
            font-size: 24px;
            font-weight: bold;
            fill: #2d3748;
        }

        .gauge-label {
            text-anchor: middle;
            font-size: 12px;
            fill: #718096;
        }

        .digital-display {
            background: linear-gradient(145deg, #1a202c, #2d3748);
            color: #00ff41;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            font-family: 'Courier New', monospace;
            margin-top: 20px;
            border: 2px solid #4a5568;
        }

        .digital-value {
            font-size: 2.5em;
            font-weight: bold;
            text-shadow: 0 0 10px #00ff41;
        }

        .digital-unit {
            font-size: 1.2em;
            opacity: 0.8;
        }

        .chart-container {
            height: 300px;
            position: relative;
            background: #f8fafc;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }

        .chart-title {
            text-align: center;
            margin-bottom: 15px;
            color: #4a5568;
            font-weight: bold;
        }

        .chart-svg {
            width: 100%;
            height: 100%;
        }

        .chart-grid-line {
            stroke: #e2e8f0;
            stroke-width: 0.5;
        }

        .chart-grid-line.major {
            stroke-width: 1;
            stroke: #cbd5e0;
        }

        .chart-axis-text {
            font-size: 10px;
            fill: #718096;
        }

        .chart-line {
            fill: none;
            stroke: #667eea;
            stroke-width: 2;
        }

        .controls {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .control-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .control-group label {
            font-size: 0.9em;
            color: #4a5568;
            font-weight: 500;
        }

        .control-group input {
            padding: 8px 12px;
            border: 1px solid #cbd5e0;
            border-radius: 6px;
            font-size: 0.9em;
        }

        .theme-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            cursor: pointer;
            font-size: 1.5em;
            backdrop-filter: blur(10px);
        }

        .dark-theme {
            background: linear-gradient(135deg, #2d3748 0%, #1a202c 100%);
            color: #e2e8f0;
        }

        .dark-theme .card {
            background: rgba(45, 55, 72, 0.95);
            color: #e2e8f0;
        }

        .dark-theme .status-bar {
            background: rgba(45, 55, 72, 0.9);
        }

        .dark-theme .chart-container {
            background: #2d3748;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            
            .status-bar {
                flex-direction: column;
                align-items: stretch;
            }
            
            .controls {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <svg class="logo" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                <circle cx="50" cy="50" r="45" fill="none" stroke="white" stroke-width="3"/>
                <path d="M30 50 L45 35 L55 45 L70 30" stroke="white" stroke-width="3" fill="none"/>
                <circle cx="50" cy="65" r="8" fill="white"/>
                <text x="50" y="85" text-anchor="middle" fill="white" font-size="8">KG</text>
            </svg>
            <h1>KontrolGas Dashboard</h1>
            <p>Monitoreo en Tiempo Real</p>
        </div>

        <div class="status-bar">
            <!-- Medidor de bater√≠a integrado en la barra de estado -->
            <div class="battery-meter">
                <span class="battery-icon" id="batteryIcon">üîã</span>
                <div class="battery-info">
                    <div class="battery-percentage" id="batteryPercentageStatus">--</div>
                    <div class="battery-voltage" id="batteryVoltageStatus">--V</div>
                </div>
                <div class="battery-progress">
                    <div class="battery-progress-fill" id="batteryProgressStatus" style="width: 0%"></div>
                </div>
            </div>
            
            <div class="status-item">
                <div class="status-indicator" id="connectionIndicator"></div>
                <span id="connectionStatus">Conectado</span>
            </div>
        </div>

        <div class="dashboard-grid">
            <div class="card">
                <h3>Peso Actual</h3>
                <div class="gauge-container">
                    <svg class="gauge-svg" viewBox="0 0 200 120">
                        <defs>
                            <linearGradient id="gaugeGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                                <stop offset="0%" style="stop-color:#4ade80"/>
                                <stop offset="50%" style="stop-color:#fbbf24"/>
                                <stop offset="100%" style="stop-color:#ef4444"/>
                            </linearGradient>
                        </defs>
                        <path class="gauge-bg" d="M 20 100 A 80 80 0 0 1 180 100"/>
                        <path class="gauge-fill" id="weightGauge" d="M 20 100 A 80 80 0 0 1 180 100" stroke-dasharray="0 251.2"/>
                        <text class="gauge-text" x="100" y="85" id="weightValue">0.00</text>
                        <text class="gauge-label" x="100" y="105">kg</text>
                    </svg>
                </div>
                <div class="digital-display">
                    <div class="digital-value" id="digitalWeight">0.00</div>
                    <div class="digital-unit">KILOGRAMOS</div>
                </div>
            </div>

            <div class="card">
                <h3>Nivel de Bater√≠a</h3>
                <div class="gauge-container">
                    <svg class="gauge-svg" viewBox="0 0 200 120">
                        <defs>
                            <linearGradient id="batteryGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                                <stop offset="0%" style="stop-color:#ef4444"/>
                                <stop offset="50%" style="stop-color:#fbbf24"/>
                                <stop offset="100%" style="stop-color:#4ade80"/>
                            </linearGradient>
                        </defs>
                        <path class="gauge-bg" d="M 20 100 A 80 80 0 0 1 180 100"/>
                        <path class="gauge-fill" id="batteryGauge" d="M 20 100 A 80 80 0 0 1 180 100" stroke-dasharray="0 251.2" stroke="url(#batteryGradient)"/>
                        <text class="gauge-text" x="100" y="85" id="batteryValue">0</text>
                        <text class="gauge-label" x="100" y="105">%</text>
                    </svg>
                </div>
                <div class="digital-display">
                    <div class="digital-value" id="digitalBattery">0%</div>
                    <div class="digital-unit" id="batterySource">BATER√çA</div>
                </div>
            </div>
        </div>

        <div class="card">
            <h3>Gr√°fico de Consumo (24 Horas)</h3>
            <div class="chart-container">
                <div class="chart-title">Peso Neto vs Tiempo</div>
                <svg class="chart-svg" id="consumptionChart" viewBox="0 0 800 200">
                    <!-- Grid lines will be generated by JavaScript -->
                </svg>
            </div>
            
            <div class="controls">
                <div class="control-group">
                    <label for="emptyWeight">Peso Vac√≠o (kg)</label>
                    <input type="number" id="emptyWeight" value="15" step="0.1" min="0">
                </div>
                <div class="control-group">
                    <label for="fullWeight">Peso Lleno (kg)</label>
                    <input type="number" id="fullWeight" value="50" step="0.1" min="0">
                </div>
            </div>
        </div>

        <div class="card">
            <h3>Informaci√≥n del Dispositivo</h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                <div><strong>Device ID:</strong> <span id="deviceId">--</span></div>
                <div><strong>Firmware:</strong> <span id="firmwareVersion">--</span></div>
                <div><strong>WiFi:</strong> <span id="wifiStatus">--</span></div>
                <div><strong>IP:</strong> <span id="ipAddress">--</span></div>
                <div><strong>√öltima actualizaci√≥n:</strong> <span id="lastUpdate">--</span></div>
                <div><strong>Estado calibraci√≥n:</strong> <span id="calibrationStatus">--</span></div>
                <div><strong>Factor calibraci√≥n:</strong> <span id="calibrationFactor">--</span></div>
                <div><strong>Valor RAW:</strong> <span id="rawValue">--</span></div>
                <div><strong>√öltimo env√≠o:</strong> <span id="lastSendReason">--</span></div>
                <div><strong>Respuesta servidor:</strong> <span id="lastResponse">--</span></div>
            </div>
        </div>
    </div>

    <button class="theme-toggle" onclick="toggleTheme()">üåô</button>

    <script>
        // Variables globales para el dashboard
        let currentWeight = 0;
        let currentBatteryPercentage = 0;
        let currentBatteryVoltage = 0;
        let maxNetWeight = 35; // Peso neto m√°ximo (lleno - vac√≠o)
        let weightHistory = [];
        let lastDataReceived = null;
        let connectionStatus = false;

        // Configuraci√≥n del gr√°fico
        const chartConfig = {
            width: 800,
            height: 200,
            marginLeft: 60,
            marginRight: 40,
            marginTop: 20,
            marginBottom: 40
        };

        // Funci√≥n para actualizar el gr√°fico Y-axis din√°micamente
        function updateYAxisAndGrid() {
            const emptyWeight = parseFloat(document.getElementById('emptyWeight').value) || 15;
            const fullWeight = parseFloat(document.getElementById('fullWeight').value) || 50;
            maxNetWeight = fullWeight - emptyWeight;
            
            console.log('Actualizando escala Y-axis: 0 a ' + maxNetWeight + ' kg');
            
            generateChartGrid();
        }

        // Generar grid del gr√°fico
        function generateChartGrid() {
            const svg = document.getElementById('consumptionChart');
            svg.innerHTML = '';
            
            const plotWidth = chartConfig.width - chartConfig.marginLeft - chartConfig.marginRight;
            const plotHeight = chartConfig.height - chartConfig.marginTop - chartConfig.marginBottom;
            
            // Grid vertical (horas)
            for (let hour = 0; hour <= 24; hour++) {
                const x = chartConfig.marginLeft + (hour / 24) * plotWidth;
                const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                line.setAttribute('x1', x);
                line.setAttribute('y1', chartConfig.marginTop);
                line.setAttribute('x2', x);
                line.setAttribute('y2', chartConfig.marginTop + plotHeight);
                line.setAttribute('class', hour % 6 === 0 ? 'chart-grid-line major' : 'chart-grid-line');
                svg.appendChild(line);
                
                // Etiquetas de horas
                if (hour % 3 === 0) {
                    const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                    text.setAttribute('x', x);
                    text.setAttribute('y', chartConfig.marginTop + plotHeight + 15);
                    text.setAttribute('class', 'chart-axis-text');
                    text.setAttribute('text-anchor', 'middle');
                    text.textContent = hour.toString().padStart(2, '0') + ':00';
                    svg.appendChild(text);
                }
            }
            
            // Grid horizontal (peso)
            const divisions = 10;
            for (let i = 0; i <= divisions; i++) {
                const weight = (i / divisions) * maxNetWeight;
                const y = chartConfig.marginTop + plotHeight - (i / divisions) * plotHeight;
                
                const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                line.setAttribute('x1', chartConfig.marginLeft);
                line.setAttribute('y1', y);
                line.setAttribute('x2', chartConfig.marginLeft + plotWidth);
                line.setAttribute('y2', y);
                line.setAttribute('class', i % 2 === 0 ? 'chart-grid-line major' : 'chart-grid-line');
                svg.appendChild(line);
                
                // Etiquetas de peso
                if (i % 2 === 0) {
                    const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                    text.setAttribute('x', chartConfig.marginLeft - 10);
                    text.setAttribute('y', y + 4);
                    text.setAttribute('class', 'chart-axis-text');
                    text.setAttribute('text-anchor', 'end');
                    text.textContent = weight.toFixed(1) + 'kg';
                    svg.appendChild(text);
                }
            }
            
            // L√≠nea de datos (placeholder)
            const dataLine = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            dataLine.setAttribute('class', 'chart-line');
            dataLine.setAttribute('id', 'dataLine');
            dataLine.setAttribute('d', 'M ' + chartConfig.marginLeft + ' ' + (chartConfig.marginTop + plotHeight/2));
            svg.appendChild(dataLine);
        }

        // Actualizar gauge semicircular
        function updateGauge(elementId, value, maxValue) {
            const gauge = document.getElementById(elementId);
            if (!gauge) return;
            
            const percentage = Math.min(value / maxValue, 1);
            const circumference = 251.2; // Aproximadamente œÄ * 80 (radio del arco)
            const offset = circumference * (1 - percentage);
            
            gauge.style.strokeDasharray = `${circumference * percentage} ${circumference}`;
        }

        // Actualizar display digital
        function updateDigitalDisplay(elementId, value, unit = '') {
            const element = document.getElementById(elementId);
            if (element) {
                element.textContent = value + unit;
            }
        }

        // Actualizar medidor de bater√≠a en la barra de estado
        function updateBatteryMeter(percentage, voltage, icon, powerSource) {
            document.getElementById('batteryIcon').textContent = icon || 'üîã';
            document.getElementById('batteryPercentageStatus').textContent = percentage + '%';
            document.getElementById('batteryVoltageStatus').textContent = voltage.toFixed(2) + 'V';
            document.getElementById('batteryProgressStatus').style.width = percentage + '%';
            
            // Cambiar color de la barra seg√∫n el nivel
            const progressFill = document.getElementById('batteryProgressStatus');
            if (percentage <= 20) {
                progressFill.style.background = 'linear-gradient(90deg, #ef4444, #dc2626)';
            } else if (percentage <= 50) {
                progressFill.style.background = 'linear-gradient(90deg, #fbbf24, #f59e0b)';
            } else {
                progressFill.style.background = 'linear-gradient(90deg, #4ade80, #22c55e)';
            }
        }

        // Funci√≥n principal para actualizar el dashboard
        function updateDashboard(data) {
            console.log('Actualizando dashboard con datos:', data);
            
            // Actualizar peso
            const weight = parseFloat(data.weight) || 0;
            currentWeight = weight;
            
            // Actualizar gauge de peso (m√°ximo 100kg)
            updateGauge('weightGauge', weight, 100);
            document.getElementById('weightValue').textContent = weight.toFixed(2);
            updateDigitalDisplay('digitalWeight', weight.toFixed(2));
            
            // Actualizar bater√≠a
            const batteryPercentage = parseInt(data.battery_percentage) || 0;
            const batteryVoltage = parseFloat(data.battery_voltage) || 0;
            const batteryIcon = data.battery_icon || 'üîã';
            const powerSource = data.power_source || 'Desconocida';
            
            currentBatteryPercentage = batteryPercentage;
            currentBatteryVoltage = batteryVoltage;
            
            // Actualizar gauge de bater√≠a
            updateGauge('batteryGauge', batteryPercentage, 100);
            document.getElementById('batteryValue').textContent = batteryPercentage;
            updateDigitalDisplay('digitalBattery', batteryPercentage + '%');
            document.getElementById('batterySource').textContent = powerSource.toUpperCase();
            
            // Actualizar medidor de bater√≠a en la barra de estado
            updateBatteryMeter(batteryPercentage, batteryVoltage, batteryIcon, powerSource);
            
            // Actualizar informaci√≥n del dispositivo
            document.getElementById('deviceId').textContent = data.device_id || '--';
            document.getElementById('firmwareVersion').textContent = data.firmware_version || '--';
            document.getElementById('wifiStatus').textContent = data.wifi_connected ? 
                ('Conectado a ' + (data.wifi_ssid || 'Red desconocida')) : 'Desconectado';
            document.getElementById('ipAddress').textContent = data.ip_address || '--';
            document.getElementById('lastUpdate').textContent = new Date().toLocaleTimeString();
            document.getElementById('calibrationStatus').textContent = 
                (data.calibrated && data.tara_set) ? 'Calibrado ‚úÖ' : 'No calibrado ‚ùå';
            document.getElementById('calibrationFactor').textContent = 
                parseFloat(data.calibration_factor).toFixed(6) || '--';
            document.getElementById('rawValue').textContent = data.raw_value || '--';
            document.getElementById('lastSendReason').textContent = data.last_send_reason || '--';
            document.getElementById('lastResponse').textContent = data.last_response || '--';
            
            // Actualizar estado de conexi√≥n
            connectionStatus = true;
            document.getElementById('connectionIndicator').style.background = '#4ade80';
            document.getElementById('connectionStatus').textContent = 'Conectado';
            
            // Agregar datos al historial para el gr√°fico
            addToWeightHistory(weight);
            
            lastDataReceived = new Date();
        }

        // Agregar datos al historial de peso
        function addToWeightHistory(weight) {
            const now = new Date();
            const timeKey = now.getHours() + ':' + now.getMinutes().toString().padStart(2, '0');
            
            // Mantener solo las √∫ltimas 24 horas de datos
            if (weightHistory.length > 144) { // 24 horas * 6 puntos por hora
                weightHistory.shift();
            }
            
            weightHistory.push({
                time: timeKey,
                weight: weight,
                timestamp: now.getTime()
            });
            
            console.log('Historial actualizado:', weightHistory.length, 'puntos');
        }

        // Simular datos para pruebas (se eliminar√° cuando lleguen datos reales)
        function simulateData() {
            const simulatedData = {
                device_id: 'KG_DEMO',
                firmware_version: 'v80.32-DEMO',
                weight: (Math.random() * 30 + 10).toFixed(2),
                battery_percentage: Math.floor(Math.random() * 100),
                battery_voltage: (3.2 + Math.random() * 1.0).toFixed(2),
                battery_icon: 'üîã',
                power_source: 'Bater√≠a',
                wifi_connected: true,
                wifi_ssid: 'Red Demo',
                ip_address: '192.168.1.100',
                calibrated: true,
                tara_set: true,
                calibration_factor: '2156.789',
                raw_value: Math.floor(Math.random() * 100000),
                last_send_reason: 'Env√≠o peri√≥dico',
                last_response: 'HTTP 200: OK'
            };
            
            updateDashboard(simulatedData);
        }

        // Funci√≥n para recibir datos del ESP32 (implementar seg√∫n tu m√©todo de comunicaci√≥n)
        function receiveDataFromESP32() {
            // Esta funci√≥n debe ser implementada seg√∫n tu m√©todo de comunicaci√≥n
            // Puede ser WebSocket, HTTP polling, Server-Sent Events, etc.
            
            // Por ahora, usar datos simulados para pruebas
            console.log('Esperando datos del ESP32...');
            
            // Verificar si han llegado datos reales en los √∫ltimos 30 segundos
            if (lastDataReceived && (new Date() - lastDataReceived) < 30000) {
                // Datos reales recientes, no simular
                return;
            }
            
            // Si no hay datos reales, usar simulaci√≥n para pruebas
            simulateData();
        }

        // Funci√≥n para procesar datos POST del ESP32
        function handleESP32Data(event) {
            try {
                const data = JSON.parse(event.data || '{}');
                console.log('Datos recibidos del ESP32:', data);
                updateDashboard(data);
            } catch (error) {
                console.error('Error procesando datos del ESP32:', error);
            }
        }

        // Alternar tema
        function toggleTheme() {
            document.body.classList.toggle('dark-theme');
            const button = document.querySelector('.theme-toggle');
            button.textContent = document.body.classList.contains('dark-theme') ? '‚òÄÔ∏è' : 'üåô';
        }

        // Event listeners
        document.getElementById('emptyWeight').addEventListener('input', updateYAxisAndGrid);
        document.getElementById('fullWeight').addEventListener('input', updateYAxisAndGrid);

        // Inicializaci√≥n
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Dashboard inicializado');
            
            // Generar grid inicial
            updateYAxisAndGrid();
            
            // Iniciar recepci√≥n de datos
            receiveDataFromESP32();
            
            // Actualizar cada 5 segundos (para datos simulados)
            setInterval(receiveDataFromESP32, 5000);
            
            // Verificar conexi√≥n cada 30 segundos
            setInterval(function() {
                if (lastDataReceived && (new Date() - lastDataReceived) > 60000) {
                    // Sin datos por m√°s de 1 minuto
                    connectionStatus = false;
                    document.getElementById('connectionIndicator').style.background = '#ef4444';
                    document.getElementById('connectionStatus').textContent = 'Desconectado';
                }
            }, 30000);
        });

        // FUNCI√ìN PARA RECIBIR DATOS REALES DEL ESP32
        // Esta funci√≥n debe ser llamada cuando lleguen datos reales del ESP32
        function processRealESP32Data(jsonData) {
            try {
                console.log('Procesando datos reales del ESP32:', jsonData);
                updateDashboard(jsonData);
                
                // Marcar que se recibieron datos reales
                lastDataReceived = new Date();
                connectionStatus = true;
            } catch (error) {
                console.error('Error procesando datos reales del ESP32:', error);
            }
        }

        // EJEMPLO DE C√ìMO INTEGRAR CON DIFERENTES M√âTODOS DE COMUNICACI√ìN:

        // 1. Si usas WebSocket:
        /*
        const ws = new WebSocket('ws://tu-servidor-websocket');
        ws.onmessage = function(event) {
            const data = JSON.parse(event.data);
            processRealESP32Data(data);
        };
        */

        // 2. Si usas Server-Sent Events:
        /*
        const eventSource = new EventSource('/events');
        eventSource.onmessage = function(event) {
            const data = JSON.parse(event.data);
            processRealESP32Data(data);
        };
        */

        // 3. Si usas HTTP POST (el ESP32 env√≠a datos a este dashboard):
        // El dashboard debe tener un endpoint que reciba los datos y los procese
        // Ejemplo: cuando el ESP32 hace POST a esta p√°gina, los datos se procesan autom√°ticamente

        // 4. Si usas HTTP polling (el dashboard consulta al ESP32):
        /*
        setInterval(function() {
            fetch('http://ip-del-esp32/data')
                .then(response => response.json())
                .then(data => processRealESP32Data(data))
                .catch(error => console.error('Error consultando ESP32:', error));
        }, 10000); // Consultar cada 10 segundos
        */
    </script>
</body>
</html>
